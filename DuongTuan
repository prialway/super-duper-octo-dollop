local ScreenGui = Instance.new("ScreenGui")
local Frame = Instance.new("Frame")
local RecordButton = Instance.new("TextButton")
local PlayButton = Instance.new("TextButton")

-- Cài đặt GUI
ScreenGui.Parent = game.Players.LocalPlayer:WaitForChild("PlayerGui")

Frame.Parent = ScreenGui
Frame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
Frame.Size = UDim2.new(0, 300, 0, 100)
Frame.Position = UDim2.new(0.5, -150, 0.5, -50)

-- Nút Recording
RecordButton.Parent = Frame
RecordButton.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
RecordButton.Position = UDim2.new(0, 10, 0, 10)
RecordButton.Size = UDim2.new(0, 130, 0, 80)
RecordButton.Text = "Recording (Off)"

-- Nút Play
PlayButton.Parent = Frame
PlayButton.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
PlayButton.Position = UDim2.new(0, 160, 0, 10)
PlayButton.Size = UDim2.new(0, 130, 0, 80)
PlayButton.Text = "Play"

-- Biến ghi lại hành động
local recording = false
local actions = {}

-- Bắt đầu hoặc dừng ghi
RecordButton.MouseButton1Click:Connect(function()
    recording = not recording
    if recording then
        RecordButton.Text = "Recording (On)"
        actions = {} -- Làm sạch danh sách hành động khi bắt đầu ghi mới
    else
        RecordButton.Text = "Recording (Off)"
    end
end)

-- Ghi lại hành động đặt unit
local function onUnitPlaced(unit, position)
    if recording then
        table.insert(actions, {unit = unit, position = position})
        print("Ghi lại hành động: Đặt", unit, "tại vị trí", position)
    end
end

-- Giả lập sự kiện đặt unit (cần thay thế bằng sự kiện thực tế trong game)
game:GetService("Players").LocalPlayer.Character.ChildAdded:Connect(function(child)
    if child:IsA("Model") then
        local position = child:GetPrimaryPartCFrame().p
        onUnitPlaced(child.Name, position)
    end
end)

-- Phát lại hành động đã ghi
PlayButton.MouseButton1Click:Connect(function()
    for _, action in ipairs(actions) do
        -- Tái tạo hành động đặt unit (cần thay thế bằng logic thực tế)
        print("Đang thực hiện lại:", action.unit, "tại vị trí", action.position)
        
        -- Ví dụ: Tạo lại unit tại vị trí đã ghi
        local unitClone = game:GetService("ReplicatedStorage"):FindFirstChild(action.unit):Clone()
        unitClone.Parent = game.Workspace
        unitClone:SetPrimaryPartCFrame(CFrame.new(action.position))
        
        wait(1) -- Đặt thời gian chờ giữa các hành động nếu cần
    end
end)

